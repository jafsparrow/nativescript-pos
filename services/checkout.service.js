"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var CheckOutService = (function () {
    function CheckOutService() {
        this.lineItems = [];
    }
    CheckOutService.prototype.addProductToCart = function (product, quantity) {
        console.log("product name is " + product.name + " and quantitiy is " + quantity);
        var lineItem = Object.assign({}, product);
        lineItem.id = product.id;
        lineItem.quantity = quantity;
        lineItem.totalPrice = product.price * quantity;
        var index = this.lineItems.findIndex(function (item) {
            return item.id === product.id;
        });
        if (index > -1) {
            // edit the current item .
            this.lineItems[index].quantity = quantity;
            this.lineItems[index].totalPrice = quantity * product.price;
        }
        else {
            this.lineItems.push(lineItem);
        }
        console.log("the length now is " + this.lineItems.length);
        console.log(this.lineItems);
    };
    CheckOutService.prototype.removeProductFromCart = function (product) {
        // const index = this.lineItems.indexOf(product);
        var filteredItems = this.lineItems.filter(function (item) {
            return item.id !== product.id;
        });
        this.lineItems = filteredItems;
    };
    CheckOutService.prototype.changeProdcutQuantity = function (product, newQuantity) {
        var lineItem = Object.assign({}, product);
        lineItem.quantity = newQuantity;
        lineItem.totalPrice = product.price * newQuantity;
        var index = this.lineItems.findIndex(function (item) {
            return item.product.id === product.id;
        });
        Object.assign(this.lineItems[index], lineItem);
    };
    CheckOutService.prototype.editProductFromCart = function (product) {
    };
    CheckOutService.prototype.getTheCartProductCount = function () {
        return this.lineItems.length;
    };
    CheckOutService.prototype.getTheCart = function () {
        console.log('from service fetching cart item.');
        console.log(this.lineItems);
        return this.lineItems;
    };
    CheckOutService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [])
    ], CheckOutService);
    return CheckOutService;
}());
exports.CheckOutService = CheckOutService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlY2tvdXQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNoZWNrb3V0LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBMkM7QUFNM0M7SUFJSTtRQUNFLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFJRCwwQ0FBZ0IsR0FBaEIsVUFBaUIsT0FBWSxFQUFFLFFBQWdCO1FBRTdDLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQW1CLE9BQU8sQ0FBQyxJQUFJLDBCQUFxQixRQUFVLENBQUMsQ0FBQztRQUM1RSxJQUFNLFFBQVEsR0FBYSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN0RCxRQUFRLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDekIsUUFBUSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDN0IsUUFBUSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQztRQUMvQyxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBRSxVQUFDLElBQUk7WUFDMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssT0FBTyxDQUFDLEVBQUUsQ0FBQTtRQUNoQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDZCwwQkFBMEI7WUFDMUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1lBQzFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxHQUFHLFFBQVEsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO1FBRTlELENBQUM7UUFBQSxJQUFJLENBQUMsQ0FBQztZQUNMLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFJRCxPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUFxQixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQVEsQ0FBQyxDQUFDO1FBQzFELE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCwrQ0FBcUIsR0FBckIsVUFBc0IsT0FBWTtRQUNoQyxpREFBaUQ7UUFDakQsSUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBQSxJQUFJO1lBQzlDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsU0FBUyxHQUFHLGFBQWEsQ0FBQztJQUNqQyxDQUFDO0lBRUQsK0NBQXFCLEdBQXJCLFVBQXNCLE9BQVksRUFBRSxXQUFtQjtRQUNyRCxJQUFNLFFBQVEsR0FBYSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN0RCxRQUFRLENBQUMsUUFBUSxHQUFHLFdBQVcsQ0FBQztRQUNoQyxRQUFRLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxLQUFLLEdBQUcsV0FBVyxDQUFDO1FBRWxELElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFFLFVBQUEsSUFBSTtZQUMxQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssT0FBTyxDQUFDLEVBQUUsQ0FBQTtRQUN2QyxDQUFDLENBQUMsQ0FBQztRQUNILE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUVqRCxDQUFDO0lBRUQsNkNBQW1CLEdBQW5CLFVBQW9CLE9BQVk7SUFFaEMsQ0FBQztJQUdELGdEQUFzQixHQUF0QjtRQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQztJQUMvQixDQUFDO0lBRUQsb0NBQVUsR0FBVjtRQUNFLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0NBQWtDLENBQUMsQ0FBQztRQUNoRCxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBdEVRLGVBQWU7UUFEM0IsaUJBQVUsRUFBRTs7T0FDQSxlQUFlLENBK0gzQjtJQUFELHNCQUFDO0NBQUEsQUEvSEQsSUErSEM7QUEvSFksMENBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBQcm9kdWN0IH0gZnJvbSAnLi9wcm9kdWN0JztcclxuaW1wb3J0IHsgTGluZUl0ZW0gfSBmcm9tICcuL2xpbmUtaXRlbSc7XHJcbmltcG9ydCB7IE9yZGVyIH0gZnJvbSAnLi9vcmRlcidcclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQ2hlY2tPdXRTZXJ2aWNlIHtcclxuICAgIFxyXG4gICAgbGluZUl0ZW1zOiBMaW5lSXRlbVtdO1xyXG4gIFxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHRoaXMubGluZUl0ZW1zID0gW107XHJcbiAgICB9XHJcbiAgXHJcblxyXG4gIFxyXG4gICAgYWRkUHJvZHVjdFRvQ2FydChwcm9kdWN0OiBhbnksIHF1YW50aXR5OiBudW1iZXIpIHtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBwcm9kdWN0IG5hbWUgaXMgJHtwcm9kdWN0Lm5hbWV9IGFuZCBxdWFudGl0aXkgaXMgJHtxdWFudGl0eX1gKTtcclxuICAgICAgY29uc3QgbGluZUl0ZW06IExpbmVJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvZHVjdCk7XHJcbiAgICAgIGxpbmVJdGVtLmlkID0gcHJvZHVjdC5pZDtcclxuICAgICAgbGluZUl0ZW0ucXVhbnRpdHkgPSBxdWFudGl0eTtcclxuICAgICAgbGluZUl0ZW0udG90YWxQcmljZSA9IHByb2R1Y3QucHJpY2UgKiBxdWFudGl0eTtcclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxpbmVJdGVtcy5maW5kSW5kZXgoIChpdGVtKSA9PiB7XHJcbiAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBwcm9kdWN0LmlkXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYoaW5kZXggPiAtMSkge1xyXG4gICAgICAgIC8vIGVkaXQgdGhlIGN1cnJlbnQgaXRlbSAuXHJcbiAgICAgICAgdGhpcy5saW5lSXRlbXNbaW5kZXhdLnF1YW50aXR5ID0gcXVhbnRpdHk7XHJcbiAgICAgICAgdGhpcy5saW5lSXRlbXNbaW5kZXhdLnRvdGFsUHJpY2UgPSBxdWFudGl0eSAqIHByb2R1Y3QucHJpY2U7XHJcbiAgXHJcbiAgICAgIH1lbHNlIHtcclxuICAgICAgICB0aGlzLmxpbmVJdGVtcy5wdXNoKGxpbmVJdGVtKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgXHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgdGhlIGxlbmd0aCBub3cgaXMgJHt0aGlzLmxpbmVJdGVtcy5sZW5ndGh9YCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMubGluZUl0ZW1zKTtcclxuICAgIH1cclxuICBcclxuICAgIHJlbW92ZVByb2R1Y3RGcm9tQ2FydChwcm9kdWN0OiBhbnkpIHtcclxuICAgICAgLy8gY29uc3QgaW5kZXggPSB0aGlzLmxpbmVJdGVtcy5pbmRleE9mKHByb2R1Y3QpO1xyXG4gICAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gdGhpcy5saW5lSXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgIHJldHVybiBpdGVtLmlkICE9PSBwcm9kdWN0LmlkO1xyXG4gICAgICB9KVxyXG4gIFxyXG4gICAgICB0aGlzLmxpbmVJdGVtcyA9IGZpbHRlcmVkSXRlbXM7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBjaGFuZ2VQcm9kY3V0UXVhbnRpdHkocHJvZHVjdDogYW55LCBuZXdRdWFudGl0eTogbnVtYmVyKSB7XHJcbiAgICAgIGNvbnN0IGxpbmVJdGVtOiBMaW5lSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHByb2R1Y3QpO1xyXG4gICAgICBsaW5lSXRlbS5xdWFudGl0eSA9IG5ld1F1YW50aXR5O1xyXG4gICAgICBsaW5lSXRlbS50b3RhbFByaWNlID0gcHJvZHVjdC5wcmljZSAqIG5ld1F1YW50aXR5O1xyXG4gIFxyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMubGluZUl0ZW1zLmZpbmRJbmRleCggaXRlbSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0ucHJvZHVjdC5pZCA9PT0gcHJvZHVjdC5pZFxyXG4gICAgICB9KTtcclxuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmxpbmVJdGVtc1tpbmRleF0sIGxpbmVJdGVtKTtcclxuICBcclxuICAgIH1cclxuICBcclxuICAgIGVkaXRQcm9kdWN0RnJvbUNhcnQocHJvZHVjdDogYW55KSB7XHJcbiAgXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBnZXRUaGVDYXJ0UHJvZHVjdENvdW50KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmxpbmVJdGVtcy5sZW5ndGg7XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIGdldFRoZUNhcnQoKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdmcm9tIHNlcnZpY2UgZmV0Y2hpbmcgY2FydCBpdGVtLicpO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmxpbmVJdGVtcyk7XHJcbiAgICAgIHJldHVybiB0aGlzLmxpbmVJdGVtcztcclxuICAgIH1cclxuXHJcbi8vICAgICBwcml2YXRlIG9yZGVyTnVtYmVyOiBudW1iZXI7XHJcbi8vICAgICBwdWJsaWMgb3JkZXJEZXRhaWw6IE9yZGVyO1xyXG4vLyAgICAgcHVibGljIGxpbmVJdGVtczogQXJyYXk8TGluZUl0ZW0+O1xyXG4vLyAgICAgY29uc3RydWN0b3IoKSB7XHJcbi8vICAgICAgICAgdGhpcy5vcmRlck51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwKTtcclxuLy8gICAgICAgICB0aGlzLmxpbmVJdGVtcyA9IFtdO1xyXG4gICAgICAgIFxyXG4vLyAgICAgfVxyXG5cclxuXHJcbi8vIGFkZFByb2R1Y3RUb0xpbmVJdGVtcyhwcm9kdWN0OiBQcm9kdWN0LCBxdWFudGl0eTogbnVtYmVyKSB7XHJcbi8vICAgICBsZXQgbmV3TGluZUl0ZW06IExpbmVJdGVtID0gdGhpcy5jcmVhdGVOZXdMaW5lSXRlbShwcm9kdWN0LCBxdWFudGl0eSk7XHJcbi8vICAgICB0aGlzLmFkZExpbmVJdGVtKG5ld0xpbmVJdGVtKTtcclxuLy8gfVxyXG5cclxuLy8gYWRkTGluZUl0ZW0oaXRlbTogTGluZUl0ZW0pIHtcclxuLy8gICAgIHRoaXMubGluZUl0ZW1zLnB1c2goaXRlbSk7XHJcbi8vIH1cclxuXHJcblxyXG4vLyBjcmVhdGVOZXdMaW5lSXRlbShwcm9kdWN0OiBQcm9kdWN0LCBxdWFudGl0eTogbnVtYmVyKTogTGluZUl0ZW0ge1xyXG4vLyAgICAgY29uc3QgdG90YWw6IGFueSA9IHByb2R1Y3QucHJpY2UgKiBxdWFudGl0eTtcclxuLy8gICAgIGxldCBsaW5lSXRlbTogTGluZUl0ZW0gPSB7XHJcbi8vICAgICAgICAgaWQ6IHByb2R1Y3QuaWQsXHJcbi8vICAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5LFxyXG4vLyAgICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxyXG4vLyAgICAgICAgIHRvdGFsOiB0b3RhbCxcclxuLy8gICAgIH1cclxuLy8gICAgIHJldHVybiBsaW5lSXRlbTtcclxuLy8gICB9XHJcblxyXG4vLyAgIGNyZWF0ZU9yZGVyKGxpbmVJdGVtczogQXJyYXk8TGluZUl0ZW0+KSB7XHJcbi8vICAgICB0aGlzLm9yZGVyRGV0YWlsID0gbmV3IE9yZGVyKHRoaXMub3JkZXJOdW1iZXIsIHRoaXMubGluZUl0ZW1zKTtcclxuLy8gICAgIHRoaXMub3JkZXJEZXRhaWwudG90YWwgPSB0aGlzLmdldFRvdGFsUHJpY2UobGluZUl0ZW1zKTtcclxuLy8gICAgIHRoaXMub3JkZXJEZXRhaWwuY3JlYXRlZF9hdCA9IG5ldyBEYXRlKCk7XHJcbi8vICAgICB0aGlzLm9yZGVyRGV0YWlsLnRvdGFsX3F1YW50aXR5ID0gdGhpcy5nZXRUb3RhbFF1YW50aXR5KGxpbmVJdGVtcyk7XHJcbiAgICBcclxuXHJcbi8vICAgfVxyXG5cclxuLy8gICBnZXRUb3RhbFByaWNlKGxpbmVJdGVtczogQXJyYXk8TGluZUl0ZW0+KTogbnVtYmVyIHtcclxuLy8gICAgIGxldCB0b3RhbFByaWNlID0gMDsgXHJcbi8vICAgICBsaW5lSXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuLy8gICAgICAgICB0b3RhbFByaWNlID0gdG90YWxQcmljZSArIGl0ZW0ucHJpY2U7XHJcbi8vICAgICB9KVxyXG4vLyAgICAgcmV0dXJuIHRvdGFsUHJpY2U7XHJcbi8vICAgfVxyXG5cclxuLy8gICAgIGdldFRvdGFsUXVhbnRpdHkobGluZUl0ZW1zOiBBcnJheTxMaW5lSXRlbT4pOiBudW1iZXIge1xyXG4vLyAgICAgICAgIGxldCB0b3RhbFF1YW50aXR5ID0gMDsgXHJcbi8vICAgICAgICAgbGluZUl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbi8vICAgICAgICAgICAgIHRvdGFsUXVhbnRpdHkgPSB0b3RhbFF1YW50aXR5ICsgaXRlbS5xdWFudGl0eTtcclxuLy8gICAgICAgICB9KVxyXG4vLyAgICAgICAgIHJldHVybiB0b3RhbFF1YW50aXR5O1xyXG4vLyAgIH1cclxufSJdfQ==